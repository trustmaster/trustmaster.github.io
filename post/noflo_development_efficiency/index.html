<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <meta property="og:site_name" content="A system brought to life">
    <meta property="og:type" content="article">

    
    <meta property="og:image" content="https://blog.kodigy.com//img/post-bg.jpg">
    
    <meta property="twitter:image" content="https://blog.kodigy.com//img/post-bg.jpg" />
    
    

    
    <meta name="title" content="Development efficiency challenges in NoFlo" />
    <meta property="og:title" content="Development efficiency challenges in NoFlo" />
    <meta property="twitter:title" content="Development efficiency challenges in NoFlo" />
    

    
    <meta name="description" content="Obstacles on the way to happy day-to-day life with NoFlo and ways to overcome them">
    <meta property="og:description" content="Obstacles on the way to happy day-to-day life with NoFlo and ways to overcome them" />
    <meta property="twitter:description" content="Obstacles on the way to happy day-to-day life with NoFlo and ways to overcome them" />
    

    
    
    <meta property="twitter:card" content="summary_large_image" />
    
    
    

    <meta name="keyword" content="">
    <link rel="shortcut icon" href="https://blog.kodigy.com/img/favicon.ico">

    <title>Development efficiency challenges in NoFlo-</title>

    <link rel="canonical" href="https://blog.kodigy.com/post/noflo_development_efficiency/">

    <link rel="stylesheet" href="https://blog.kodigy.com/css/iDisqus.min.css" />

    
    <link rel="stylesheet" href="https://blog.kodigy.com/css/bootstrap.min.css">

    
    <link rel="stylesheet" href="https://blog.kodigy.com/css/hux-blog.min.css">

    
    <link rel="stylesheet" href="https://blog.kodigy.com/css/zanshang.css">

    
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet"
        type="text/css">

    
    <link rel="stylesheet" href="https://blog.kodigy.com/css/custom.css">

    
    
    <script src="https://blog.kodigy.com/js/jquery.min.js"></script>

    
    <script src="https://blog.kodigy.com/js/bootstrap.min.js"></script>

    
    <script src="https://blog.kodigy.com/js/hux-blog.min.js"></script>

    
    

</head>

<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://blog.kodigy.com/">A system brought to life</a>
        </div>

        
        
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    
                    
                    
                    <li>
                        <a href="https://blog.kodigy.com/categories/development">development</a>
                    </li>
                    
                    <li>
                        <a href="https://blog.kodigy.com/categories/flow-based-programming">flow-based-programming</a>
                    </li>
                    
                    <li>
                        <a href="https://blog.kodigy.com/categories/productivity">productivity</a>
                    </li>
                    
                    

                    
                    <li><a href="https://blog.kodigy.com/about/author/">About</a></li>
                    

                    
                </ul>
            </div>
        </div>
        
    </div>
    
</nav>
<script>
    
    
    
    var $body = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e) {
        if ($navbar.className.indexOf('in') > 0) {
            
            $navbar.className = " ";
            
            setTimeout(function () {
                
                if ($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            }, 400)
        } else {
            
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>



<style type="text/css">
    header.intro-header {
        background-image: url('/img/post-bg.jpg')
    }
</style>
<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="https://blog.kodigy.com/%20/tags/noflo" title="noflo">
                            noflo
                        </a>
                        
                        <a class="tag" href="https://blog.kodigy.com/%20/tags/fbp" title="fbp">
                            fbp
                        </a>
                        
                        <a class="tag" href="https://blog.kodigy.com/%20/tags/development" title="development">
                            development
                        </a>
                        
                    </div>
                    <h1>Development efficiency challenges in NoFlo</h1>
                    <h2 class="subheading">Obstacles on the way to happy day-to-day life with NoFlo and ways to overcome them</h2>
                    <span class="meta">
                        
                        A 6 minute read.
                        
                        Published on
                        November 7, 2016
                        
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>




<article>
    <div class="container">
        <div class="row">

            
            <div class="
                col-lg-11 col-lg-offset-1
                col-md-10 col-md-offset-1
                post-container">

                
                <div class="table-of-contents">
                    <header>
                        <h2>Contents</h2>
                    </header>
                    <nav id="TableOfContents">
  <ul>
    <li><a href="#defining-new-components-is-slow">Defining new components is slow</a>
      <ul>
        <li><a href="#solutions">Solutions</a></li>
      </ul>
    </li>
    <li><a href="#wiring-up-all-the-ports-is-slow-fbp">Wiring up all the ports is slow (.FBP)</a>
      <ul>
        <li><a href="#solutions-1">Solutions</a></li>
      </ul>
    </li>
    <li><a href="#cant-tell-if-a-graph-works-until-everything-is-wired">Can&rsquo;t tell if a graph works until everything is wired</a>
      <ul>
        <li><a href="#solutions-2">Solutions</a></li>
      </ul>
    </li>
    <li><a href="#doesnt-show-which-component-failedstuck">Doesn&rsquo;t show which component failed/stuck</a>
      <ul>
        <li><a href="#solutions-3">Solutions</a></li>
      </ul>
    </li>
    <li><a href="#conditionalsbranching-is-hard">Conditionals/branching is hard</a>
      <ul>
        <li><a href="#solutions-4">Solutions</a></li>
      </ul>
    </li>
    <li><a href="#components-flourish-with-promisescallbacks">Components flourish with promises/callbacks</a>
      <ul>
        <li><a href="#solutions-5">Solutions</a></li>
      </ul>
    </li>
    <li><a href="#coffee-is-cool-but-its-es2015-for-most-people-now">Coffee is cool but it’s ES2015+ for most people now</a>
      <ul>
        <li><a href="#solutions-6">Solutions</a></li>
      </ul>
    </li>
    <li><a href="#whats-next">What&rsquo;s next?</a></li>
  </ul>
</nav>
                </div>
                
                <h1 id="development-efficiency-challenges-in-noflo">Development efficiency challenges in NoFlo</h1>
<p>Programming with NoFlo is getting more and more smooth with every release. However, if maintaining a NoFlo application is your day-to-day job you may notice some inconveniences.</p>
<h2 id="defining-new-components-is-slow">Defining new components is slow</h2>
<p>Every time you add a new component you have to define a pretty massive hash map of its ports, their data types and preferably at least descriptions. This is cool as it encourages you to declare as many details as possible but it’s not very friendly to rapid prototyping where you want just to list the ports and get your hands on the code and add details later.</p>
<h3 id="solutions">Solutions</h3>
<ul>
<li>Reduce minimal boilerplate for new components</li>
</ul>
<h2 id="wiring-up-all-the-ports-is-slow-fbp">Wiring up all the ports is slow (.FBP)</h2>
<p>OK, maybe it wouldn’t be so slow if it was all done in Flowhub but until those glory days when we could switch all our projects to Flowhub, the problem persists.</p>
<p>Components have many ports. Say there are 8 components in the graph, each of them has 4 ports and there are also 2 inports and 2 outports in the graph. This could make at least 32 connections required for the graph to run. Which is writing 32 lines of code in .FBP, and what’s worse keeping them all and the whole picture in mind. Using <a href="https://noflojs.org/visualize/">NoFlo visualize tool</a> helps a lot here though. But then you close that graph, open it 3 months later to add a new branch and rewire some connection and you can’t do it without a migraine or two.</p>
<p>With Flowhub it’s a bit easier b/c you see the picture, attach and detach connections and rewire it more or less effectively.</p>
<h3 id="solutions-1">Solutions</h3>
<ul>
<li>Reduce the amount of ports and connections in the graphs</li>
<li>Use more terse syntax than .FBP</li>
<li>Switch to Flowhub eventually</li>
</ul>
<h2 id="cant-tell-if-a-graph-works-until-everything-is-wired">Can&rsquo;t tell if a graph works until everything is wired</h2>
<p>It’s easier to code something in small iterations one piece at a time: add a component, add tests for it, add another component with tests, wire these two components, make sure they work together, add a third component, etc. then you have the whole graph and tests for it. This requires a lot of rewiring and intermediate tests.</p>
<p>As described above, in .FBP rewiring is expensive. In Flowhub rewiring is cheaper but still requires quite some clicks and drags, but what’s more important Flowhub/NoFlo won’t let you run the program until the graph is all wired up correctly. So what we do in practice is not trying anything until the entire graph is complete with all the components and connections. Which is a lot of headache wiring first (in .FBP) and then lots of bugs when it’s finally wired (both .FBP and Flowhub).</p>
<h3 id="solutions-2">Solutions</h3>
<ul>
<li>Do write tests for components and subgraphs</li>
<li>Prefer mid-sized components and subgraphs so that each of them can have a test without too much hassle</li>
</ul>
<h2 id="doesnt-show-which-component-failedstuck">Doesn&rsquo;t show which component failed/stuck</h2>
<p>This is the hardest thing when debugging. So you know that the graph just hangs somewhere, at some component. But you don’t know which one. There is <a href="https://www.npmjs.com/package/flowtrace">Flowtrace</a> at your service but reading a flowtrace of a real application is hell of a job, there can be hundreds of socket events and you have to figure out which ones are actually <em>missing</em> from those hundreds. Replaying a flowtrace in Flowhub with <code>flowtrace-replay</code> is slightly better but the problem persists: you need to find the missing piece of jigsaw.</p>
<p>A less critical but also annoying thing is that when something fails somewhere, you see the error in the output and it maybe even contains a stack trace to some extent but it doesn’t contain the process or component name, which you’d like to know in first place when opening an error output.</p>
<h3 id="solutions-3">Solutions</h3>
<ul>
<li>Always include component names in stack traces</li>
<li>Always catch and log errors</li>
<li>Visual flowtraces in Flowhub</li>
<li>How could we fix the missing jigsaw problem?</li>
</ul>
<h2 id="conditionalsbranching-is-hard">Conditionals/branching is hard</h2>
<p>There are no simple IFs in FBP. No such thing. If you need to check something, it’s either inside a component or a whole branch of the graph. Usually if you need an IF in the graph, it results into 2 graphs. Which takes time wiring up. And duplicates the code. And duplicates the bugs.</p>
<p>&ldquo;Stop thinking in control flow you idiots, you should think data flow here!&rdquo; - says the Captain FBP. Yes, sir, how do I think such things in data flow, sir?</p>
<h3 id="solutions-4">Solutions</h3>
<ul>
<li>Simple graphs are easier to add conditionals to</li>
<li>If you need to duplicate a branch, put it in a subgraph</li>
<li>Keep control logic inside components</li>
</ul>
<h2 id="components-flourish-with-promisescallbacks">Components flourish with promises/callbacks</h2>
<p>Look inside a component that does some real job and you find yourself in the land of wild and unharnessed async JS. Callback hell - yes, promises - yes, <code>async/await</code> inside the components - oh yes, coming soon. Dataflow you say? Hardly so.</p>
<p>I suspect that one of the initial syncretic intentions of NoFlo was to split these vertical callback staircases and promise stacks into good old black boxes with wires between them. However, splitting every async call and callback into 2 components is rather expensive, so in practice we rarely do that.</p>
<p>But could NoFlo help us simplify async code so we don’t have to write so many callbacks or promises? Yes, partially.</p>
<h3 id="solutions-5">Solutions</h3>
<ul>
<li>Thoughtful breakdown of the applications into components</li>
<li>Use promises inside components</li>
</ul>
<h2 id="coffee-is-cool-but-its-es2015-for-most-people-now">Coffee is cool but it’s ES2015+ for most people now</h2>
<p>CoffeeScript is really cool, it’s write less do more. Some people complain that all the cool kids are using ES6/7+Babel now and that CoffeeScript is completely abandoned. But it’s simply mature and cool and you still write less and do more with Coffee than with ES6+.</p>
<p>However, on a historical scale, CoffeeScript is most probably a stale creek. It’s popularity is not going to grow because of the cool kids and everybody busy watching the changes in ES spec. That means, if NoFlo wants to grow its audience, it has to embrace ES2015+ support. No-no, I don’t mean it should be rewritten in *Script (<code>s/*/(Type/Pure/whatever/</code>), I mean the ecosystem should be very friendly to people coming from ES world. The documents should contain ES examples first and there should be good quality component libraries in ES to be used as reference too.</p>
<h3 id="solutions-6">Solutions</h3>
<ul>
<li>Documentation should be ES-first, CS-second</li>
<li>Examples and reference libraries in ES</li>
</ul>
<h2 id="whats-next">What&rsquo;s next?</h2>
<p>I&rsquo;ve been addressing these problems and a few more while maintaining backends in NoFlo. Just like I created <code>WirePattern</code> back in the days of <code>noflo@0.5.*</code> (which is going for good with <code>noflo@0.8.*</code> and the <a href="http://bergie.iki.fi/blog/noflo-process-api/">Process API</a>), I&rsquo;ve created <a href="https://github.com/trustmaster/noflo-assembly">NoFlo Assembly Line</a> which is a combination of design patterns, best practices and a ES6 library that works on top of NoFlo. It&rsquo;s not yet fully released and I plan to do so after NoFlo <code>0.8.0</code> is officially out.</p>


                

                <hr>
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="https://blog.kodigy.com/post/on_noflo_db_apps/" data-toggle="tooltip" data-placement="top"
                            title="On NoFlo database applications">&larr;
                            Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="https://blog.kodigy.com/post/noflo_08_npm_shrinkwrap/" data-toggle="tooltip" data-placement="top"
                            title="Forcing a specific NoFlo version for all dependencies">Next
                            Post &rarr;</a>
                    </li>
                    
                </ul>

                
<div id="disqus-comment"></div>



            </div>
            
            <div class="
                col-lg-11 col-lg-offset-1
                col-md-10 col-md-offset-1
                sidebar-container">

                
                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5><a href="https://blog.kodigy.com/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                        
                        
                        
                        
                        
                        <a href="https://blog.kodigy.com/%20/tags/development" title="development">
                            development
                        </a>
                        
                        
                        
                        <a href="https://blog.kodigy.com/%20/tags/fbp" title="fbp">
                            fbp
                        </a>
                        
                        
                        
                        <a href="https://blog.kodigy.com/%20/tags/noflo" title="noflo">
                            noflo
                        </a>
                        
                        
                    </div>
                </section>
                

                
                
            </div>
        </div>
    </div>
</article>




<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    
                    <li>
                        <a href='' rel="alternate"
                            type="application/rss+xml" title="A system brought to life">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    

                    
                    <li>
                        <a href="https://twitter.com/sibiroff">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    

                    

                    
                    
                    
                    <li>
                        <a target="_blank" href="https://github.com/trustmaster">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    
                    <li>
                        <a target="_blank" href="https://www.linkedin.com/in/sibirov">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Vladimir Sibirov 2021
                    <br>
                    <a href="https://themes.gohugo.io/hugo-theme-cleanwhite">CleanWhite Hugo Theme</a> by <a
                        href="https://zhaohuabing.com">Huabing</a>
                </p>
            </div>
        </div>
    </div>
</footer>




<script>
    function async(u, c) {
        var d = document, t = 'script',
            o = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        o.src = u;
        if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
        s.parentNode.insertBefore(o, s);
    }
</script>






<script>
    
    if ($('#tag_cloud').length !== 0) {
        async("/js/jquery.tagcloud.js", function () {
            $.fn.tagcloud.defaults = {
                
                color: { start: '#bbbbee', end: '#0085a1' },
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>


<script>
    async("https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.js", function () {
        var $nav = document.querySelector("nav");
        if ($nav) FastClick.attach($nav);
    })
</script>






<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-92537342-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


</body>

</html>